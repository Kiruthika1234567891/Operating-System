#include <stdio.h>
#include <stdlib.h>

struct Employee {
    int id;
    char name[20];
    float salary;
};

int main() {
    FILE *fp;
    struct Employee e;
    int choice, id, found;

    fp = fopen("employee.dat", "r+b");
    if (!fp) fp = fopen("employee.dat", "w+b");

    while (1) {
        printf("\n1. Add Employee\n2. Display All\n3. Search Employee\n4. Update Salary\n5. Exit\nEnter choice: ");
        scanf("%d", &choice);

        if (choice == 1) {
            printf("Enter ID Name Salary: ");
            scanf("%d %s %f", &e.id, e.name, &e.salary);
            fseek(fp, (e.id - 1) * sizeof(e), SEEK_SET);
            fwrite(&e, sizeof(e), 1, fp);
            printf("Record Added.\n");
        }

        else if (choice == 2) {
            rewind(fp);
            while (fread(&e, sizeof(e), 1, fp)) {
                if (e.id != 0)
                    printf("%d %s %.2f\n", e.id, e.name, e.salary);
            }
        }

        else if (choice == 3) {
            printf("Enter ID to search: ");
            scanf("%d", &id);
            fseek(fp, (id - 1) * sizeof(e), SEEK_SET);
            if (fread(&e, sizeof(e), 1, fp) && e.id == id)
                printf("%d %s %.2f\n", e.id, e.name, e.salary);
            else
                printf("Not found.\n");
        }

        else if (choice == 4) {
            printf("Enter ID to update: ");
            scanf("%d", &id);
            fseek(fp, (id - 1) * sizeof(e), SEEK_SET);
            if (fread(&e, sizeof(e), 1, fp) && e.id == id) {
                printf("Enter new salary: ");
                scanf("%f", &e.salary);
                fseek(fp, (id - 1) * sizeof(e), SEEK_SET);
                fwrite(&e, sizeof(e), 1, fp);
                printf("Updated.\n");
            } else {
                printf("Not found.\n");
            }
        }

        else if (choice == 5) {
            fclose(fp);
            return 0;
        }
    }
}
